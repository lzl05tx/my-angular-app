<x-inner class="au-inner">
  <!-- <div class="au-panel au-tree-left" [x-loading]="treeLoading" style="width: 22rem;">
    <h4>
      <span>组织机构</span>
      <x-link
        icon="fto-plus"
        title="增加根节点"
        [disabled]="!auth['add-root']"
        (click)="auth['add-root'] && action('add-root', selected)"
      ></x-link>
    </h4>
    <x-tree
      #treeCom
      au-adaption
      [outerHeight]="100"
      [data]="data"
      expandedLevel="0"
      [activatedId]="activatedId"
      [nodeHeight]="1.875"
      [actions]="treeActions"
      (activatedChange)="action('info', $event)"
    >
    </x-tree>
  </div> -->
  <div class="au-form-right">
    <au-tool>
      <x-button type="primary" icon="fto-plus" [disabled]="!auth['add']" (click)="action('add','')">新增</x-button>
    </au-tool>
    <x-table
      #tableCom
      [columns]="columns"
      [rowHeight]="35"
      [data]="data"
      [size]="20"
      [(index)]="index"
      [query]="query"
      [bodyHeight]="100"
      [bodyColumnTpl]="{ actions: actionsTpl }"
      [adaptionHeight]="128"
      virtualScroll
      [loading] = 'tasksLoading'
    ></x-table>
  </div>
</x-inner>

<ng-template #actionsTpl let-column="$column" let-row="$row">
  <div class="au-table-actions">
    <x-link [disabled]="!auth['info']" icon="fto-eye" (click)="auth['info'] && action('info', row)" title="查看"></x-link>
    <x-link [disabled]="!auth['edit']" icon="fto-edit" (click)="auth['edit'] && action('edit', row)" title="修改"></x-link>
    <x-link [disabled]="!auth['delete']" icon="fto-trash-2" (click)="auth['delete'] && action('delete', row)" title="删除"></x-link>
  </div>
</ng-template>
