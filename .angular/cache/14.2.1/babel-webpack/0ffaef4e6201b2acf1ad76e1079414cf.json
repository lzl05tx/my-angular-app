{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewEncapsulation, ChangeDetectionStrategy, NgModule } from '@angular/core';\nimport { __decorate } from 'tslib';\nimport * as i1 from '@ng-nest/ui/core';\nimport { XWithConfig, XInputBoolean, X_THEME_COLORS, X_THEME_COLOR_KEYS, X_THEME_DARK_COLORS } from '@ng-nest/ui/core';\nimport { XControlValueAccessor, XValueAccessor, XBaseFormModule } from '@ng-nest/ui/base-form';\nimport * as i4 from '@angular/forms';\nimport { UntypedFormGroup, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { map, takeUntil, debounceTime } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport * as i2 from '@ng-nest/ui/i18n';\nimport { XI18nModule } from '@ng-nest/ui/i18n';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i5 from '@ng-nest/ui/switch';\nimport { XSwitchModule } from '@ng-nest/ui/switch';\nimport * as i6 from '@ng-nest/ui/button';\nimport { XButtonModule } from '@ng-nest/ui/button';\nimport * as i7 from '@ng-nest/ui/layout';\nimport { XLayoutModule } from '@ng-nest/ui/layout';\nimport * as i8 from '@ng-nest/ui/form';\nimport { XFormModule } from '@ng-nest/ui/form';\n/**\r\n * Theme\r\n * @selector x-theme\r\n * @decorator component\r\n */\n\nfunction XThemeComponent_x_col_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"x-col\")(1, \"x-switch\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function XThemeComponent_x_col_2_Template_x_switch_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.dark = $event);\n    })(\"ngModelChange\", function XThemeComponent_x_col_2_Template_x_switch_ngModelChange_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.darkChanges());\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"width\", 8, \"rem\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"label\", ctx_r0.locale == null ? null : ctx_r0.locale.darkMode)(\"ngModel\", ctx_r0.dark);\n  }\n}\n\nconst XThemePrefix = 'x-theme';\nconst X_CONFIG_NAME = 'theme';\nconst XThemeAmounts = [-0.1, -0.2, -0.3, -0.4, -0.5, -0.6, -0.7, -0.8, -0.9, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9];\n/**\r\n * Theme Property\r\n */\n\nclass XThemeProperty extends XControlValueAccessor {\n  constructor() {\n    super(...arguments);\n    /**\r\n     * @zh_CN 参数前缀\r\n     * @en_US Parameter prefix\r\n     */\n\n    this.prefix = '--x-';\n    /**\r\n     * @zh_CN 暗黑模式\r\n     * @en_US Dark mode\r\n     */\n\n    this.dark = false;\n    /**\r\n     * @zh_CN 初始化默认值事件\r\n     * @en_US Initialize default value event\r\n     */\n\n    this.defaultClick = new EventEmitter();\n    /**\r\n     * @zh_CN 暗黑模式改变事件\r\n     * @en_US Dark mode change event\r\n     */\n\n    this.darkChange = new EventEmitter();\n  }\n\n}\n/** @nocollapse */\n\n\nXThemeProperty.ɵfac = /* @__PURE__ */function () {\n  let ɵXThemeProperty_BaseFactory;\n  return function XThemeProperty_Factory(t) {\n    return (ɵXThemeProperty_BaseFactory || (ɵXThemeProperty_BaseFactory = i0.ɵɵgetInheritedFactory(XThemeProperty)))(t || XThemeProperty);\n  };\n}();\n/** @nocollapse */\n\n\nXThemeProperty.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: XThemeProperty,\n  selectors: [[\"ng-component\"]],\n  inputs: {\n    prefix: \"prefix\",\n    amounts: \"amounts\",\n    showDark: \"showDark\",\n    showDetail: \"showDetail\",\n    dark: \"dark\"\n  },\n  outputs: {\n    defaultClick: \"defaultClick\",\n    darkChange: \"darkChange\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function XThemeProperty_Template(rf, ctx) {},\n  encapsulation: 2\n});\n\n__decorate([XWithConfig(X_CONFIG_NAME, XThemeAmounts)], XThemeProperty.prototype, \"amounts\", void 0);\n\n__decorate([XInputBoolean()], XThemeProperty.prototype, \"showDark\", void 0);\n\n__decorate([XInputBoolean()], XThemeProperty.prototype, \"showDetail\", void 0);\n\n__decorate([XInputBoolean()], XThemeProperty.prototype, \"dark\", void 0);\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(XThemeProperty, [{\n    type: Component,\n    args: [{\n      template: ''\n    }]\n  }], null, {\n    prefix: [{\n      type: Input\n    }],\n    amounts: [{\n      type: Input\n    }],\n    showDark: [{\n      type: Input\n    }],\n    showDetail: [{\n      type: Input\n    }],\n    dark: [{\n      type: Input\n    }],\n    defaultClick: [{\n      type: Output\n    }],\n    darkChange: [{\n      type: Output\n    }]\n  });\n})();\n\nclass XThemeComponent extends XThemeProperty {\n  constructor(configService, i18n, cdr) {\n    super();\n    this.configService = configService;\n    this.i18n = i18n;\n    this.cdr = cdr;\n    this.formGroup = new UntypedFormGroup({});\n    this.theme = {\n      colors: {}\n    };\n    this.width = '45rem';\n    this.beforeColors = {};\n    this.currentColors = {};\n    this.darkBeforeColors = {};\n    this.controls = [{\n      control: 'color-picker',\n      id: 'primary',\n      label: '主色',\n      span: 5\n    }, {\n      control: 'color-picker',\n      id: 'success',\n      label: '成功',\n      span: 5\n    }, {\n      control: 'color-picker',\n      id: 'warning',\n      label: '警告',\n      span: 5\n    }, {\n      control: 'color-picker',\n      id: 'danger',\n      label: '危险',\n      span: 5\n    }, {\n      control: 'color-picker',\n      id: 'info',\n      label: '信息',\n      span: 5\n    }, {\n      control: 'color-picker',\n      id: 'background',\n      label: '背景',\n      span: 5\n    }, {\n      control: 'color-picker',\n      id: 'border',\n      label: '边框',\n      span: 5\n    }, {\n      control: 'color-picker',\n      id: 'text',\n      label: '文字',\n      span: 5\n    }];\n    this.value = {};\n    this.locale = {};\n    this._unSubject = new Subject();\n    this.themeService = this.configService.themeService;\n  }\n\n  writeValue(value) {\n    this.value = value;\n\n    if (this.value && Object.keys(this.value).length > 0) {\n      this.theme = {\n        colors: this.themeService.getDefineColors(Object.assign({}, X_THEME_COLORS, this.value), '', this.dark)\n      };\n      this.formGroup.patchValue(this.theme.colors);\n    }\n\n    this.cdr.detectChanges();\n  }\n\n  ngOnInit() {\n    this.theme = this.configService.getTheme(true);\n    this.setControls();\n    this.setDefaultColors();\n    this.controls.map(x => {\n      x.value = this.theme.colors[x.id];\n    });\n    this.i18n.localeChange.pipe(map(x => x.theme), takeUntil(this._unSubject)).subscribe(x => {\n      this.locale = x;\n      this.setControlsLabel();\n      this.cdr.detectChanges();\n    });\n  }\n\n  ngAfterViewInit() {\n    this.formGroup.valueChanges.pipe(debounceTime(100), takeUntil(this._unSubject)).subscribe(x => {\n      this.beforeColors = this.currentColors;\n      let changes = this.getChanges(x);\n\n      if (this.isOneAndInColorKeys(changes)) {\n        let [key, value] = Object.entries(changes)[0];\n        let colors = !this.dark ? this.themeService.setRoot(key, value, '') : this.themeService.setDarkRoot(key, value, '');\n        Object.assign(x, colors);\n        this.currentColors = x;\n        this.formGroup.patchValue(x);\n      } else {\n        this.currentColors = x;\n        this.value = x;\n        this.configService.setTheme({\n          colors: x\n        });\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this._unSubject.next();\n\n    this._unSubject.unsubscribe();\n  }\n\n  setControlsLabel() {\n    Object.keys(this.locale).forEach(x => {\n      let control = this.controls.find(y => y.id === x);\n\n      if (control) {\n        control.label = this.locale[x];\n        control.change && control.change();\n      }\n    });\n  }\n\n  setDefaultColors() {\n    this.beforeColors = this.theme.colors;\n    this.currentColors = this.beforeColors;\n    this.darkBeforeColors = this.beforeColors;\n  }\n\n  setControls() {\n    [...this.controls].forEach((control, index) => {\n      let addControls = [];\n      control.span = !this.showDetail ? 6 : 5;\n      this.width = !this.showDetail ? '36rem' : '45rem';\n\n      for (let amount of this.amounts) {\n        addControls.push({\n          control: 'color-picker',\n          id: `${control.id}${this.themeService.getSuffix(amount)}`,\n          label: '',\n          hidden: !this.showDetail\n        });\n      }\n\n      this.controls.splice(index * this.amounts.length + index + 1, 0, ...addControls);\n    });\n  }\n\n  default() {\n    this.dark = false;\n    let colors = this.themeService.getDefineColors(Object.assign({}, X_THEME_COLORS), '', this.dark);\n    this.beforeColors = colors;\n    this.currentColors = colors;\n    this.formGroup.patchValue(colors);\n    this.defaultClick.emit(colors);\n    this.cdr.detectChanges();\n  }\n\n  isOneAndInColorKeys(colors) {\n    const keys = Object.keys(colors);\n\n    if (keys.length === 1 && X_THEME_COLOR_KEYS.includes(keys[0])) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getChanges(colors) {\n    let result = {};\n\n    for (let color in colors) {\n      if (colors[color] !== this.beforeColors[color]) {\n        result[color] = colors[color];\n      }\n    }\n\n    return result;\n  }\n\n  darkChanges() {\n    let colors = this.darkBeforeColors;\n\n    if (this.dark) {\n      this.beforeColors = this.formGroup.value;\n      this.darkBeforeColors = this.formGroup.value;\n      colors = this.themeService.getDefineColors(Object.assign({}, this.themeService.getColorsInProperty(X_THEME_COLORS), X_THEME_DARK_COLORS), '', this.dark);\n    }\n\n    this.formGroup.patchValue(colors);\n    this.darkChange.emit(this.dark);\n  }\n\n}\n/** @nocollapse */\n\n\nXThemeComponent.ɵfac = function XThemeComponent_Factory(t) {\n  return new (t || XThemeComponent)(i0.ɵɵdirectiveInject(i1.XConfigService), i0.ɵɵdirectiveInject(i2.XI18nService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n/** @nocollapse */\n\n\nXThemeComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: XThemeComponent,\n  selectors: [[\"x-theme\"]],\n  features: [i0.ɵɵProvidersFeature([XValueAccessor(XThemeComponent)]), i0.ɵɵInheritDefinitionFeature],\n  decls: 7,\n  vars: 7,\n  consts: [[1, \"x-theme\"], [3, \"width\", 4, \"ngIf\"], [3, \"click\"], [\"span\", \"2\", \"space\", \"1\", 3, \"formGroup\", \"controls\", \"width\"], [\"direction\", \"row\", 3, \"label\", \"ngModel\", \"ngModelChange\"]],\n  template: function XThemeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"x-row\");\n      i0.ɵɵtemplate(2, XThemeComponent_x_col_2_Template, 2, 4, \"x-col\", 1);\n      i0.ɵɵelementStart(3, \"x-col\")(4, \"x-button\", 2);\n      i0.ɵɵlistener(\"click\", function XThemeComponent_Template_x_button_click_4_listener() {\n        return ctx.default();\n      });\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(6, \"x-form\", 3);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showDark);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", 8, \"rem\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.locale == null ? null : ctx.locale.initDefault);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.formGroup)(\"controls\", ctx.controls)(\"width\", ctx.width);\n    }\n  },\n  dependencies: [i3.NgIf, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.FormGroupDirective, i5.XSwitchComponent, i6.XButtonComponent, i7.XRowComponent, i7.XColComponent, i8.XFormComponent],\n  styles: [\".x-theme{margin:0;padding:0;display:inline-block}.x-theme x-color-picker:not(:first-child){margin-left:.125rem}.x-theme-darken,.x-theme-default,.x-theme-gradual{display:flex}.x-theme-default x-color-picker{width:9.25rem}\\n\"],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(XThemeComponent, [{\n    type: Component,\n    args: [{\n      selector: 'x-theme',\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      providers: [XValueAccessor(XThemeComponent)],\n      template: \"<div class=\\\"x-theme\\\">\\r\\n  <x-row>\\r\\n    <x-col [style.width.rem]=\\\"8\\\" *ngIf=\\\"showDark\\\">\\r\\n      <x-switch direction=\\\"row\\\" [label]=\\\"locale?.darkMode\\\" [(ngModel)]=\\\"dark\\\" (ngModelChange)=\\\"darkChanges()\\\"></x-switch>\\r\\n    </x-col>\\r\\n    <x-col [style.width.rem]=\\\"8\\\">\\r\\n      <x-button (click)=\\\"default()\\\">{{ locale?.initDefault }}</x-button>\\r\\n    </x-col>\\r\\n  </x-row>\\r\\n  <x-form [formGroup]=\\\"formGroup\\\" [controls]=\\\"controls\\\" [width]=\\\"width\\\" span=\\\"2\\\" space=\\\"1\\\"></x-form>\\r\\n</div>\\r\\n\",\n      styles: [\".x-theme{margin:0;padding:0;display:inline-block}.x-theme x-color-picker:not(:first-child){margin-left:.125rem}.x-theme-darken,.x-theme-default,.x-theme-gradual{display:flex}.x-theme-default x-color-picker{width:9.25rem}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i1.XConfigService\n    }, {\n      type: i2.XI18nService\n    }, {\n      type: i0.ChangeDetectorRef\n    }];\n  }, null);\n})();\n\nclass XThemeModule {}\n/** @nocollapse */\n\n\nXThemeModule.ɵfac = function XThemeModule_Factory(t) {\n  return new (t || XThemeModule)();\n};\n/** @nocollapse */\n\n\nXThemeModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: XThemeModule\n});\n/** @nocollapse */\n\nXThemeModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, XSwitchModule, XButtonModule, XLayoutModule, XFormModule, XI18nModule, XBaseFormModule]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(XThemeModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [XThemeComponent, XThemeProperty],\n      exports: [XThemeComponent],\n      imports: [CommonModule, FormsModule, ReactiveFormsModule, XSwitchModule, XButtonModule, XLayoutModule, XFormModule, XI18nModule, XBaseFormModule]\n    }]\n  }], null, null);\n})();\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\n\nexport { XThemeAmounts, XThemeComponent, XThemeModule, XThemePrefix, XThemeProperty };","map":{"version":3,"names":["i0","EventEmitter","Component","Input","Output","ViewEncapsulation","ChangeDetectionStrategy","NgModule","__decorate","i1","XWithConfig","XInputBoolean","X_THEME_COLORS","X_THEME_COLOR_KEYS","X_THEME_DARK_COLORS","XControlValueAccessor","XValueAccessor","XBaseFormModule","i4","UntypedFormGroup","FormsModule","ReactiveFormsModule","map","takeUntil","debounceTime","Subject","i2","XI18nModule","i3","CommonModule","i5","XSwitchModule","i6","XButtonModule","i7","XLayoutModule","i8","XFormModule","XThemePrefix","X_CONFIG_NAME","XThemeAmounts","XThemeProperty","constructor","arguments","prefix","dark","defaultClick","darkChange","ɵfac","ɵcmp","prototype","type","args","template","amounts","showDark","showDetail","XThemeComponent","configService","i18n","cdr","formGroup","theme","colors","width","beforeColors","currentColors","darkBeforeColors","controls","control","id","label","span","value","locale","_unSubject","themeService","writeValue","Object","keys","length","getDefineColors","assign","patchValue","detectChanges","ngOnInit","getTheme","setControls","setDefaultColors","x","localeChange","pipe","subscribe","setControlsLabel","ngAfterViewInit","valueChanges","changes","getChanges","isOneAndInColorKeys","key","entries","setRoot","setDarkRoot","setTheme","ngOnDestroy","next","unsubscribe","forEach","find","y","change","index","addControls","amount","push","getSuffix","hidden","splice","default","emit","includes","result","color","darkChanges","getColorsInProperty","XConfigService","XI18nService","ChangeDetectorRef","NgIf","NgControlStatus","NgControlStatusGroup","NgModel","FormGroupDirective","XSwitchComponent","XButtonComponent","XRowComponent","XColComponent","XFormComponent","selector","encapsulation","None","changeDetection","OnPush","providers","styles","XThemeModule","ɵmod","ɵinj","declarations","exports","imports"],"sources":["/Users/lzl/my-angular-app/node_modules/@ng-nest/ui/fesm2020/ng-nest-ui-theme.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewEncapsulation, ChangeDetectionStrategy, NgModule } from '@angular/core';\nimport { __decorate } from 'tslib';\nimport * as i1 from '@ng-nest/ui/core';\nimport { XWithConfig, XInputBoolean, X_THEME_COLORS, X_THEME_COLOR_KEYS, X_THEME_DARK_COLORS } from '@ng-nest/ui/core';\nimport { XControlValueAccessor, XValueAccessor, XBaseFormModule } from '@ng-nest/ui/base-form';\nimport * as i4 from '@angular/forms';\nimport { UntypedFormGroup, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { map, takeUntil, debounceTime } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport * as i2 from '@ng-nest/ui/i18n';\nimport { XI18nModule } from '@ng-nest/ui/i18n';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i5 from '@ng-nest/ui/switch';\nimport { XSwitchModule } from '@ng-nest/ui/switch';\nimport * as i6 from '@ng-nest/ui/button';\nimport { XButtonModule } from '@ng-nest/ui/button';\nimport * as i7 from '@ng-nest/ui/layout';\nimport { XLayoutModule } from '@ng-nest/ui/layout';\nimport * as i8 from '@ng-nest/ui/form';\nimport { XFormModule } from '@ng-nest/ui/form';\n\n/**\r\n * Theme\r\n * @selector x-theme\r\n * @decorator component\r\n */\r\nconst XThemePrefix = 'x-theme';\r\nconst X_CONFIG_NAME = 'theme';\r\nconst XThemeAmounts = [-0.1, -0.2, -0.3, -0.4, -0.5, -0.6, -0.7, -0.8, -0.9, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9];\r\n/**\r\n * Theme Property\r\n */\r\nclass XThemeProperty extends XControlValueAccessor {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * @zh_CN 参数前缀\r\n         * @en_US Parameter prefix\r\n         */\r\n        this.prefix = '--x-';\r\n        /**\r\n         * @zh_CN 暗黑模式\r\n         * @en_US Dark mode\r\n         */\r\n        this.dark = false;\r\n        /**\r\n         * @zh_CN 初始化默认值事件\r\n         * @en_US Initialize default value event\r\n         */\r\n        this.defaultClick = new EventEmitter();\r\n        /**\r\n         * @zh_CN 暗黑模式改变事件\r\n         * @en_US Dark mode change event\r\n         */\r\n        this.darkChange = new EventEmitter();\r\n    }\r\n}\r\n/** @nocollapse */ XThemeProperty.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.0.2\", ngImport: i0, type: XThemeProperty, deps: null, target: i0.ɵɵFactoryTarget.Component });\r\n/** @nocollapse */ XThemeProperty.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"14.0.2\", type: XThemeProperty, selector: \"ng-component\", inputs: { prefix: \"prefix\", amounts: \"amounts\", showDark: \"showDark\", showDetail: \"showDetail\", dark: \"dark\" }, outputs: { defaultClick: \"defaultClick\", darkChange: \"darkChange\" }, usesInheritance: true, ngImport: i0, template: '', isInline: true });\r\n__decorate([\r\n    XWithConfig(X_CONFIG_NAME, XThemeAmounts)\r\n], XThemeProperty.prototype, \"amounts\", void 0);\r\n__decorate([\r\n    XInputBoolean()\r\n], XThemeProperty.prototype, \"showDark\", void 0);\r\n__decorate([\r\n    XInputBoolean()\r\n], XThemeProperty.prototype, \"showDetail\", void 0);\r\n__decorate([\r\n    XInputBoolean()\r\n], XThemeProperty.prototype, \"dark\", void 0);\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.0.2\", ngImport: i0, type: XThemeProperty, decorators: [{\r\n            type: Component,\r\n            args: [{ template: '' }]\r\n        }], propDecorators: { prefix: [{\r\n                type: Input\r\n            }], amounts: [{\r\n                type: Input\r\n            }], showDark: [{\r\n                type: Input\r\n            }], showDetail: [{\r\n                type: Input\r\n            }], dark: [{\r\n                type: Input\r\n            }], defaultClick: [{\r\n                type: Output\r\n            }], darkChange: [{\r\n                type: Output\r\n            }] } });\n\nclass XThemeComponent extends XThemeProperty {\r\n    constructor(configService, i18n, cdr) {\r\n        super();\r\n        this.configService = configService;\r\n        this.i18n = i18n;\r\n        this.cdr = cdr;\r\n        this.formGroup = new UntypedFormGroup({});\r\n        this.theme = {\r\n            colors: {}\r\n        };\r\n        this.width = '45rem';\r\n        this.beforeColors = {};\r\n        this.currentColors = {};\r\n        this.darkBeforeColors = {};\r\n        this.controls = [\r\n            { control: 'color-picker', id: 'primary', label: '主色', span: 5 },\r\n            { control: 'color-picker', id: 'success', label: '成功', span: 5 },\r\n            { control: 'color-picker', id: 'warning', label: '警告', span: 5 },\r\n            { control: 'color-picker', id: 'danger', label: '危险', span: 5 },\r\n            { control: 'color-picker', id: 'info', label: '信息', span: 5 },\r\n            { control: 'color-picker', id: 'background', label: '背景', span: 5 },\r\n            { control: 'color-picker', id: 'border', label: '边框', span: 5 },\r\n            { control: 'color-picker', id: 'text', label: '文字', span: 5 }\r\n        ];\r\n        this.value = {};\r\n        this.locale = {};\r\n        this._unSubject = new Subject();\r\n        this.themeService = this.configService.themeService;\r\n    }\r\n    writeValue(value) {\r\n        this.value = value;\r\n        if (this.value && Object.keys(this.value).length > 0) {\r\n            this.theme = { colors: this.themeService.getDefineColors(Object.assign({}, X_THEME_COLORS, this.value), '', this.dark) };\r\n            this.formGroup.patchValue(this.theme.colors);\r\n        }\r\n        this.cdr.detectChanges();\r\n    }\r\n    ngOnInit() {\r\n        this.theme = this.configService.getTheme(true);\r\n        this.setControls();\r\n        this.setDefaultColors();\r\n        this.controls.map((x) => {\r\n            x.value = this.theme.colors[x.id];\r\n        });\r\n        this.i18n.localeChange\r\n            .pipe(map((x) => x.theme), takeUntil(this._unSubject))\r\n            .subscribe((x) => {\r\n            this.locale = x;\r\n            this.setControlsLabel();\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n    ngAfterViewInit() {\r\n        this.formGroup.valueChanges.pipe(debounceTime(100), takeUntil(this._unSubject)).subscribe((x) => {\r\n            this.beforeColors = this.currentColors;\r\n            let changes = this.getChanges(x);\r\n            if (this.isOneAndInColorKeys(changes)) {\r\n                let [key, value] = Object.entries(changes)[0];\r\n                let colors = !this.dark ? this.themeService.setRoot(key, value, '') : this.themeService.setDarkRoot(key, value, '');\r\n                Object.assign(x, colors);\r\n                this.currentColors = x;\r\n                this.formGroup.patchValue(x);\r\n            }\r\n            else {\r\n                this.currentColors = x;\r\n                this.value = x;\r\n                this.configService.setTheme({ colors: x });\r\n            }\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this._unSubject.next();\r\n        this._unSubject.unsubscribe();\r\n    }\r\n    setControlsLabel() {\r\n        Object.keys(this.locale).forEach((x) => {\r\n            let control = this.controls.find((y) => y.id === x);\r\n            if (control) {\r\n                control.label = this.locale[x];\r\n                control.change && control.change();\r\n            }\r\n        });\r\n    }\r\n    setDefaultColors() {\r\n        this.beforeColors = this.theme.colors;\r\n        this.currentColors = this.beforeColors;\r\n        this.darkBeforeColors = this.beforeColors;\r\n    }\r\n    setControls() {\r\n        [...this.controls].forEach((control, index) => {\r\n            let addControls = [];\r\n            control.span = !this.showDetail ? 6 : 5;\r\n            this.width = !this.showDetail ? '36rem' : '45rem';\r\n            for (let amount of this.amounts) {\r\n                addControls.push({\r\n                    control: 'color-picker',\r\n                    id: `${control.id}${this.themeService.getSuffix(amount)}`,\r\n                    label: '',\r\n                    hidden: !this.showDetail\r\n                });\r\n            }\r\n            this.controls.splice(index * this.amounts.length + index + 1, 0, ...addControls);\r\n        });\r\n    }\r\n    default() {\r\n        this.dark = false;\r\n        let colors = this.themeService.getDefineColors(Object.assign({}, X_THEME_COLORS), '', this.dark);\r\n        this.beforeColors = colors;\r\n        this.currentColors = colors;\r\n        this.formGroup.patchValue(colors);\r\n        this.defaultClick.emit(colors);\r\n        this.cdr.detectChanges();\r\n    }\r\n    isOneAndInColorKeys(colors) {\r\n        const keys = Object.keys(colors);\r\n        if (keys.length === 1 && X_THEME_COLOR_KEYS.includes(keys[0])) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    getChanges(colors) {\r\n        let result = {};\r\n        for (let color in colors) {\r\n            if (colors[color] !== this.beforeColors[color]) {\r\n                result[color] = colors[color];\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    darkChanges() {\r\n        let colors = this.darkBeforeColors;\r\n        if (this.dark) {\r\n            this.beforeColors = this.formGroup.value;\r\n            this.darkBeforeColors = this.formGroup.value;\r\n            colors = this.themeService.getDefineColors(Object.assign({}, this.themeService.getColorsInProperty(X_THEME_COLORS), X_THEME_DARK_COLORS), '', this.dark);\r\n        }\r\n        this.formGroup.patchValue(colors);\r\n        this.darkChange.emit(this.dark);\r\n    }\r\n}\r\n/** @nocollapse */ XThemeComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.0.2\", ngImport: i0, type: XThemeComponent, deps: [{ token: i1.XConfigService }, { token: i2.XI18nService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });\r\n/** @nocollapse */ XThemeComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"14.0.2\", type: XThemeComponent, selector: \"x-theme\", providers: [XValueAccessor(XThemeComponent)], usesInheritance: true, ngImport: i0, template: \"<div class=\\\"x-theme\\\">\\r\\n  <x-row>\\r\\n    <x-col [style.width.rem]=\\\"8\\\" *ngIf=\\\"showDark\\\">\\r\\n      <x-switch direction=\\\"row\\\" [label]=\\\"locale?.darkMode\\\" [(ngModel)]=\\\"dark\\\" (ngModelChange)=\\\"darkChanges()\\\"></x-switch>\\r\\n    </x-col>\\r\\n    <x-col [style.width.rem]=\\\"8\\\">\\r\\n      <x-button (click)=\\\"default()\\\">{{ locale?.initDefault }}</x-button>\\r\\n    </x-col>\\r\\n  </x-row>\\r\\n  <x-form [formGroup]=\\\"formGroup\\\" [controls]=\\\"controls\\\" [width]=\\\"width\\\" span=\\\"2\\\" space=\\\"1\\\"></x-form>\\r\\n</div>\\r\\n\", styles: [\".x-theme{margin:0;padding:0;display:inline-block}.x-theme x-color-picker:not(:first-child){margin-left:.125rem}.x-theme-darken,.x-theme-default,.x-theme-gradual{display:flex}.x-theme-default x-color-picker{width:9.25rem}\\n\"], dependencies: [{ kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i4.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { kind: \"directive\", type: i4.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { kind: \"directive\", type: i4.NgModel, selector: \"[ngModel]:not([formControlName]):not([formControl])\", inputs: [\"name\", \"disabled\", \"ngModel\", \"ngModelOptions\"], outputs: [\"ngModelChange\"], exportAs: [\"ngModel\"] }, { kind: \"directive\", type: i4.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { kind: \"component\", type: i5.XSwitchComponent, selector: \"x-switch\" }, { kind: \"component\", type: i6.XButtonComponent, selector: \"x-button\" }, { kind: \"component\", type: i7.XRowComponent, selector: \"x-row\" }, { kind: \"component\", type: i7.XColComponent, selector: \"x-col\" }, { kind: \"component\", type: i8.XFormComponent, selector: \"x-form\" }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.0.2\", ngImport: i0, type: XThemeComponent, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'x-theme', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [XValueAccessor(XThemeComponent)], template: \"<div class=\\\"x-theme\\\">\\r\\n  <x-row>\\r\\n    <x-col [style.width.rem]=\\\"8\\\" *ngIf=\\\"showDark\\\">\\r\\n      <x-switch direction=\\\"row\\\" [label]=\\\"locale?.darkMode\\\" [(ngModel)]=\\\"dark\\\" (ngModelChange)=\\\"darkChanges()\\\"></x-switch>\\r\\n    </x-col>\\r\\n    <x-col [style.width.rem]=\\\"8\\\">\\r\\n      <x-button (click)=\\\"default()\\\">{{ locale?.initDefault }}</x-button>\\r\\n    </x-col>\\r\\n  </x-row>\\r\\n  <x-form [formGroup]=\\\"formGroup\\\" [controls]=\\\"controls\\\" [width]=\\\"width\\\" span=\\\"2\\\" space=\\\"1\\\"></x-form>\\r\\n</div>\\r\\n\", styles: [\".x-theme{margin:0;padding:0;display:inline-block}.x-theme x-color-picker:not(:first-child){margin-left:.125rem}.x-theme-darken,.x-theme-default,.x-theme-gradual{display:flex}.x-theme-default x-color-picker{width:9.25rem}\\n\"] }]\r\n        }], ctorParameters: function () { return [{ type: i1.XConfigService }, { type: i2.XI18nService }, { type: i0.ChangeDetectorRef }]; } });\n\nclass XThemeModule {\r\n}\r\n/** @nocollapse */ XThemeModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.0.2\", ngImport: i0, type: XThemeModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\n/** @nocollapse */ XThemeModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"14.0.2\", ngImport: i0, type: XThemeModule, declarations: [XThemeComponent, XThemeProperty], imports: [CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        XSwitchModule,\r\n        XButtonModule,\r\n        XLayoutModule,\r\n        XFormModule,\r\n        XI18nModule,\r\n        XBaseFormModule], exports: [XThemeComponent] });\r\n/** @nocollapse */ XThemeModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"14.0.2\", ngImport: i0, type: XThemeModule, imports: [CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        XSwitchModule,\r\n        XButtonModule,\r\n        XLayoutModule,\r\n        XFormModule,\r\n        XI18nModule,\r\n        XBaseFormModule] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.0.2\", ngImport: i0, type: XThemeModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    declarations: [XThemeComponent, XThemeProperty],\r\n                    exports: [XThemeComponent],\r\n                    imports: [\r\n                        CommonModule,\r\n                        FormsModule,\r\n                        ReactiveFormsModule,\r\n                        XSwitchModule,\r\n                        XButtonModule,\r\n                        XLayoutModule,\r\n                        XFormModule,\r\n                        XI18nModule,\r\n                        XBaseFormModule\r\n                    ]\r\n                }]\r\n        }] });\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { XThemeAmounts, XThemeComponent, XThemeModule, XThemePrefix, XThemeProperty };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}